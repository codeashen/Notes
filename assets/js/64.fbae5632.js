(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{389:function(t,e,s){"use strict";s.r(e);var v=s(4),_=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"一、通用命令和架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、通用命令和架构"}},[t._v("#")]),t._v(" 一、通用命令和架构")]),t._v(" "),e("h2",{attrs:{id:"_1-1-通用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-通用命令"}},[t._v("#")]),t._v(" 1.1 通用命令")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("keys [pattern]")]),t._v("：遍历所有的 key")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" mset hello world hehe haha php good phe his \nOK \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" keys he* \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hehe"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("）"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" keys he"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("h-"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("* \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hehe"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" keys ph?\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"phe"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"php"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("keys 一般不再生产环境使用，O(n) 复杂度")]),t._v(" "),e("p",[t._v("keys * 怎么用：")]),t._v(" "),e("ul",[e("li",[t._v("热备从节点")]),t._v(" "),e("li",[t._v("scan")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("dbsize")]),t._v("：计算 key 的总数")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" mset k1 v1 k2 v2 k3 v3 k4 v4 \nOK \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" dbsize \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" sadd myset a b c d e \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" dbsize \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("时间复杂度 O(1)，redis 内部有计数器")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("exists <key>")]),t._v("：检查 key 是否存在")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" a b \nOK \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v("get a \n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" del a \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" get a \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("del [key ...]")]),t._v("：删除指定 key-value")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" a b \nOK \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" get a \n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" del a \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" get a \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("expire key <seconds>")]),t._v("：设置 key 过期时间")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("ttl <key>")]),t._v("：查看 key 剩余过期时间")]),t._v(" "),e("li",[e("code",[t._v("persist <key>")]),t._v("：取消过期时间")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("type <key>")]),t._v("：返回一个 key 的类型")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" a b \nOK \n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" a \nstring\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" sadd myset "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" myset\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("p",[t._v("type 返回类型：string、hash、list、set、zset、none（不存在的 key）")])])]),t._v(" "),e("p",[t._v("常见通用命令的时间复杂度：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("命令")]),t._v(" "),e("th",[t._v("时间复杂度")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("keys")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[t._v("dbsize")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[t._v("del")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[t._v("exists")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[t._v("expire")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[t._v("type")]),t._v(" "),e("td",[t._v("O(1)")])])])]),t._v(" "),e("h2",{attrs:{id:"_1-2-数据结构和内部编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-数据结构和内部编码"}},[t._v("#")]),t._v(" 1.2 数据结构和内部编码")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/01/2mXSat.png",alt:"Redis数据结构和内部编码"}})]),t._v(" "),e("p",[t._v("Redis 对外的五种数据类型，出于性能和空间的考虑，在其内部采用不同的数据结构来实现。用户只需要关心对外提供的数据类型的使用，不关心内部实现方式，面向接口的设计。")]),t._v(" "),e("p",[t._v("实际在 Redis 源码内部，有一个 "),e("strong",[t._v("redisObject")]),t._v(" 的结构体，来对外实现不同的数据类型，其内部结构如下图：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/01/2mXPG8.png",alt:"image-20210601080813355"}})]),t._v(" "),e("h2",{attrs:{id:"_1-3-单线程架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-单线程架构"}},[t._v("#")]),t._v(" 1.3 单线程架构")]),t._v(" "),e("p",[t._v("Redis 使用单线程串行执行命令")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/01/2mXGL9.png",alt:"Redis单线程"}})]),t._v(" "),e("p",[t._v("单线程为什么这么快？")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("纯内存")]),t._v("（主要原因）")]),t._v(" "),e("li",[t._v("非阻塞 IO")]),t._v(" "),e("li",[t._v("避免线程切换和竞态消耗")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/01/2mXai6.png",alt:"Redis非阻塞IO"}})]),t._v(" "),e("p",[t._v("单线程执行命令的特点：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("一次只执行一条命令")])]),t._v(" "),e("li",[e("p",[t._v("拒绝长（慢）命令")]),t._v(" "),e("p",[t._v("keys, flushall, flushdb, slow lua script, mutil/exec, operate big value(collection)")])]),t._v(" "),e("li",[e("p",[t._v("其实不是单线程")]),t._v(" "),e("p",[t._v("fsync file descriptor：持久化文件")]),t._v(" "),e("p",[t._v("close file descriptor：关闭文件描述符")]),t._v(" "),e("p",[t._v("上述文件操作都是单独线程来执行的")])])]),t._v(" "),e("h1",{attrs:{id:"二、字符串类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、字符串类型"}},[t._v("#")]),t._v(" 二、字符串类型")]),t._v(" "),e("h2",{attrs:{id:"_2-1-字符串键值结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-字符串键值结构"}},[t._v("#")]),t._v(" 2.1 字符串键值结构")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/01/2mj2nJ.png",alt:"image-20210601082610549"}})]),t._v(" "),e("ul",[e("li",[t._v("字符串 key 是字符串，value 可以存字符串、数字、bits（二进制）、json 字符串等")]),t._v(" "),e("li",[t._v("字符串 value 不能大于 512MB")])]),t._v(" "),e("p",[t._v("字符串应用场景有：缓存、计数器、分布式锁等")]),t._v(" "),e("h2",{attrs:{id:"_2-2-字符串命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-字符串命令"}},[t._v("#")]),t._v(" 2.2 字符串命令")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("API")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("时间复杂度")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("get key")])]),t._v(" "),e("td",[t._v("获取 key 对应的 value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("set key value")])]),t._v(" "),e("td",[t._v("设置 key-value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("del key")])]),t._v(" "),e("td",[t._v("删除 key-value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("incr key")])]),t._v(" "),e("td",[t._v("key 自增 1，如果 key 不存在，自增后 get(key)=1")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("decr key")])]),t._v(" "),e("td",[t._v("key 自减 1，如果 key 不存在，自减后 get(key)=-1")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("incrby key k")])]),t._v(" "),e("td",[t._v("key 自增 k，如果 key 不存在，自增后 get(key)=k")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("decrby key k")])]),t._v(" "),e("td",[t._v("key 自减 k，如果 key 不存在，自减后 get(key)=-k")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("setex key value")])]),t._v(" "),e("td",[t._v("key 不存在，才设置")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("set key value xx")])]),t._v(" "),e("td",[t._v("key 存在，才设置")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("mget k1 k2 k3..")])]),t._v(" "),e("td",[t._v("批量获取 key，原子操作")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("mset k1 v1 k2 v2 k3 v3")])]),t._v(" "),e("td",[t._v("批量设置 key-value")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("getset key newValue")])]),t._v(" "),e("td",[t._v("set key newValue 并返回旧的 value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("append key value")])]),t._v(" "),e("td",[t._v("将 value 追加到旧的 value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("strlen key")])]),t._v(" "),e("td",[t._v("返回字符串的长度（注意中文）")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("incrbyfloat key 3.5")])]),t._v(" "),e("td",[t._v("增加 key 对应的值 3.5")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("getrange key start end")])]),t._v(" "),e("td",[t._v("获取字符串指定下标所有的值（从 0 开始，包含首位）")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("setrange key index value")])]),t._v(" "),e("td",[t._v("设置指定下标所有对应的值")]),t._v(" "),e("td",[t._v("O(1)")])])])]),t._v(" "),e("h1",{attrs:{id:"三、哈希类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、哈希类型"}},[t._v("#")]),t._v(" 三、哈希类型")]),t._v(" "),e("h2",{attrs:{id:"_3-1-哈希键值结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-哈希键值结构"}},[t._v("#")]),t._v(" 3.1 哈希键值结构")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/01/2mvbGV.png",alt:"哈希键值结构"}})]),t._v(" "),e("h2",{attrs:{id:"_3-2-哈希命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-哈希命令"}},[t._v("#")]),t._v(" 3.2 哈希命令")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("API")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("时间复杂度")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("hget key field")])]),t._v(" "),e("td",[t._v("获取 hash key 对应的 field 的 value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hset key field value")])]),t._v(" "),e("td",[t._v("设置 hash key 对应 field 的 value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hdel key field")])]),t._v(" "),e("td",[t._v("删除 hash key 对应 field 的 value")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hexists key field")])]),t._v(" "),e("td",[t._v("判断 hash key 是否有 field")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hlen key")])]),t._v(" "),e("td",[t._v("获取 hash key field 的数量")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hmget key field1 field...fieldN")])]),t._v(" "),e("td",[t._v("批量获取 hash key 的一批 field 对应的值")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hmset key field1 v1 field2 v2...fieldN vN")])]),t._v(" "),e("td",[t._v("批量设置 hash key 的一批 field value")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hincrby key field k")])]),t._v(" "),e("td",[t._v("指定 key 下 field 的值自增 k")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hgetall key")])]),t._v(" "),e("td",[t._v("返回 hash key 对应所有的 field 和 value")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hvals key")])]),t._v(" "),e("td",[t._v("返回 hash key 对应所有 field 的 value")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hkeys key")])]),t._v(" "),e("td",[t._v("返回 hash key 对应所有 field")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hsetnx key field value")])]),t._v(" "),e("td",[t._v("设置 hash key 对应 field 的 value（如 field 已经存在，则 失败）")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hincrby key field intCounter")])]),t._v(" "),e("td",[t._v("hash key 对应的 field 的 value 自增 intCounter")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("hincrbyfloat key field floatCounter")])]),t._v(" "),e("td",[t._v("hincrby 浮点数版")]),t._v(" "),e("td",[t._v("O(1)")])])])]),t._v(" "),e("h1",{attrs:{id:"四、列表类性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、列表类性"}},[t._v("#")]),t._v(" 四、列表类性")]),t._v(" "),e("h2",{attrs:{id:"_4-1-列表介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-列表介绍"}},[t._v("#")]),t._v(" 4.1 列表介绍")]),t._v(" "),e("p",[t._v("Redis 中的列表，其实是 linked list，链表")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/03/216xp9.png",alt:"image-20210603142646951"}})]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/03/21ctcn.png",alt:"image-20210603142732407"}})]),t._v(" "),e("p",[t._v("列表有如下特点")]),t._v(" "),e("ul",[e("li",[t._v("有序的")]),t._v(" "),e("li",[t._v("可以重复")]),t._v(" "),e("li",[t._v("左右两边插入和弹出")])]),t._v(" "),e("h2",{attrs:{id:"_4-2-列表api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-列表api"}},[t._v("#")]),t._v(" 4.2 列表API")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("API")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("时间复杂度")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("增")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("rpush key v1 v2...vN")])]),t._v(" "),e("td",[t._v("从列表右端插入值（1-N 个）")]),t._v(" "),e("td",[t._v("O(1~n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("lpush key v1 v2...vN")])]),t._v(" "),e("td",[t._v("从列表左端插入值（1-N 个）")]),t._v(" "),e("td",[t._v("O(1~n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("linsert key before\\|after value newValue")])]),t._v(" "),e("td",[t._v("在 list 指定的值前/后插入 newValue")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("删")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("lpop key")])]),t._v(" "),e("td",[t._v("从列表左侧弹出一个item")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("rpop key")])]),t._v(" "),e("td",[t._v("从列表右侧弹出一个item")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("lrem key count value")])]),t._v(" "),e("td",[t._v("根据 count 值，从列表中删除所有 value 相等的项"),e("br"),t._v("（1）count>0，从左到右，删除最多 count 个 value 相等的项"),e("br"),t._v("（2）count<0，从右到左，删除最多 Math.abs(count) 个 value 相等的项"),e("br"),t._v("（3）count=0，删除所有 value 相等的项")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("Itrim key start end")])]),t._v(" "),e("td",[t._v("按照索引范围修剪列表（subList）")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("查")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("lrange key start end")])]),t._v(" "),e("td",[t._v("获取列表指定索引范围所有 item（包含end）")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("lindex key index")])]),t._v(" "),e("td",[t._v("获取列表指定索引的item")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("llen key")])]),t._v(" "),e("td",[t._v("获取列表长度")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("改")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("lset key index newValue")])]),t._v(" "),e("td",[t._v("设置列表指定索引值为 newValue")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Other")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("blpop key timeout")])]),t._v(" "),e("td",[t._v("Ipop 阻塞版本，timeout 是阻塞超时时间，timeout=0 为永远不阻塞"),e("br"),t._v("针对空列表，空列表 lpop 会直接返回空，blpop 会阻塞等有元素返回")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("brpop key timeout")])]),t._v(" "),e("td",[t._v("rpop 阻塞版本，timeout 是阻塞超时时间，timeout=0 为永远不阻塞"),e("br"),t._v("针对空列表，空列表 rpop 会直接返回空，blpop 会阻塞等有元素返回")]),t._v(" "),e("td",[t._v("O(1)")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("Tips:")]),t._v(" "),e("ul",[e("li",[t._v("lpush + lpop = Stack（栈）")]),t._v(" "),e("li",[t._v("lpush + rpop = Queue（队列）")]),t._v(" "),e("li",[t._v("lpush + ltrim = Capped Collection（固定长度列表）")]),t._v(" "),e("li",[t._v("lpush + brpop = Message Queue（消息队列）")])])]),t._v(" "),e("h1",{attrs:{id:"五、集合类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、集合类型"}},[t._v("#")]),t._v(" 五、集合类型")]),t._v(" "),e("ul",[e("li",[t._v("无序的")]),t._v(" "),e("li",[t._v("无重复")]),t._v(" "),e("li",[t._v("支持集合间的操作")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("API")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("时间复杂度")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("增删")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("sadd key element")])]),t._v(" "),e("td",[t._v("向集合 key 添加 element（如果 element 已经存在 添加失败）")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("srem key element")])]),t._v(" "),e("td",[t._v("将集合 key 中的 element 移除掉")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("查询")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("scard key")])]),t._v(" "),e("td",[t._v("获取集合元素个数")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("sismember key member")])]),t._v(" "),e("td",[t._v("判断元素 member 是否在集合 key 中")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("srandmember key count")])]),t._v(" "),e("td",[t._v("从集合 key 中随机获取 count 个元素")]),t._v(" "),e("td",[t._v("O(1~n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("spop key")])]),t._v(" "),e("td",[t._v("从集合 key 中随机弹出一个元素（从集合中删掉）")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("smembers key")])]),t._v(" "),e("td",[t._v("获取集合 key 中所有元素")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("集合间操作")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("sdiff key1 key2")])]),t._v(" "),e("td",[t._v("差集")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("sinter key1 key2")])]),t._v(" "),e("td",[t._v("交集")]),t._v(" "),e("td",[t._v("O(n)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("sunion key1 key2")])]),t._v(" "),e("td",[t._v("并集")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("sdiffstore/sinterstore/sunionstore destKey key1 key2")])]),t._v(" "),e("td",[t._v("求集合间的差、交、并集，保存到集合 destKey 中")]),t._v(" "),e("td",[t._v("O(n)")])])])]),t._v(" "),e("h1",{attrs:{id:"六、有序集合类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、有序集合类型"}},[t._v("#")]),t._v(" 六、有序集合类型")]),t._v(" "),e("p",[t._v("有序集合结构")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://z3.ax1x.com/2021/06/03/231QpQ.png",alt:"image-20210603165541114"}})]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("API")]),t._v(" "),e("th",[t._v("描述")]),t._v(" "),e("th",[t._v("时间复杂度")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("基本命令")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zadd key score elemen")])]),t._v(" "),e("td",[t._v("添加 score 和 element（可以多对）")]),t._v(" "),e("td",[t._v("O(logN)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zrem key element")])]),t._v(" "),e("td",[t._v("删除元素（可以是多个）")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zscore key element")])]),t._v(" "),e("td",[t._v("返回元素的分数")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zincrby key increScore element")])]),t._v(" "),e("td",[t._v("增加或减少元素的分数")]),t._v(" "),e("td",[t._v("O(1)")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("范围操作")])]),t._v(" "),e("td"),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zrange key start end [WITHSCORES]")])]),t._v(" "),e("td",[t._v("返回指定排名范围内的升序元素[分值]")]),t._v(" "),e("td",[t._v("O(log(n) + m)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zrangebyscore key minScore maxScore [WITHSCORES]")])]),t._v(" "),e("td",[t._v("返回指定分数范围内的升序元素[分值]")]),t._v(" "),e("td",[t._v("O(log(n) + m)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zcount key minScore maxScore")])]),t._v(" "),e("td",[t._v("返回有序集合内在指定分数范围内的个数")]),t._v(" "),e("td",[t._v("O(log(n) + m)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zremrangebyrank key start end")])]),t._v(" "),e("td",[t._v("删除指定排名内的升序元素")]),t._v(" "),e("td",[t._v("O(log(n) + m)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("zremrangebyscore key minScore maxScore")])]),t._v(" "),e("td",[t._v("删除指定分数内的升序元素")]),t._v(" "),e("td",[t._v("O(log(n) + m)")])])])]),t._v(" "),e("p",[t._v("其他命令：zrevrank、zrevrange、zrevrangebyscore、zinterstore、zunionstore")])])}),[],!1,null,null,null);e.default=_.exports}}]);