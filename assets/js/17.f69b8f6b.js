(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{342:function(t,a,s){"use strict";s.r(a);var n=s(4),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"feign简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign简介"}},[t._v("#")]),t._v(" Feign简介")]),t._v(" "),a("ul",[a("li",[t._v("Feign是一个非常好用的HTTP客户端")]),t._v(" "),a("li",[t._v("Feign很大程度上简化了HTTP调用方式")]),t._v(" "),a("li",[t._v("Feign很好的弥补了SpringCould的Http调用缺陷")])]),t._v(" "),a("h3",{attrs:{id:"feign主要作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign主要作用"}},[t._v("#")]),t._v(" Feign主要作用")]),t._v(" "),a("ul",[a("li",[t._v("Feign包含了多种HTTP调用形式")]),t._v(" "),a("li",[t._v("Feign整合了Ribbon和Hystrix")]),t._v(" "),a("li",[t._v("Feign提供了多种HTTP底层支持")])]),t._v(" "),a("h3",{attrs:{id:"feign特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign特性"}},[t._v("#")]),t._v(" Feign特性")]),t._v(" "),a("ul",[a("li",[t._v("Feign实现了可插拔注解支持，包括Feign和JAX-RS注解")]),t._v(" "),a("li",[t._v("Feign支持可插拔的HTTP编码器和解码器")]),t._v(" "),a("li",[t._v("Feign支持HTTP请求和响应压缩")])]),t._v(" "),a("h3",{attrs:{id:"feign依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign依赖"}},[t._v("#")]),t._v(" Feign依赖")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Feign依赖 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-web"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-openfeign"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-netflix-eureka-client"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("h3",{attrs:{id:"feign使用步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign使用步骤"}},[t._v("#")]),t._v(" Feign使用步骤")]),t._v(" "),a("ul",[a("li",[t._v("集成Feign环境")]),t._v(" "),a("li",[t._v("添加FeignClient注解")]),t._v(" "),a("li",[t._v("业务接口添加类似SpringMVC注解")])]),t._v(" "),a("h2",{attrs:{id:"feignclient注解详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feignclient注解详解"}},[t._v("#")]),t._v(" FeignClient注解详解")]),t._v(" "),a("h3",{attrs:{id:"feignclient基础参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feignclient基础参数"}},[t._v("#")]),t._v(" FeignClient基础参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name/value")]),t._v(" "),a("td",[t._v("给FeignClient指定名称")])]),t._v(" "),a("tr",[a("td",[t._v("url")]),t._v(" "),a("td",[t._v("手动指定http调用地址")])]),t._v(" "),a("tr",[a("td",[t._v("path")]),t._v(" "),a("td",[t._v("接口统一前缀")])]),t._v(" "),a("tr",[a("td",[t._v("primary")]),t._v(" "),a("td",[t._v("多实现时指定优先级")])]),t._v(" "),a("tr",[a("td",[t._v("configuration")]),t._v(" "),a("td",[t._v("自定义Feign配置")])]),t._v(" "),a("tr",[a("td",[t._v("fallback和fallbackFactory")]),t._v(" "),a("td",[t._v("降级统一处理")])])])]),t._v(" "),a("h3",{attrs:{id:"configuration自定义配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration自定义配置"}},[t._v("#")]),t._v(" configuration自定义配置")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s3.ax1x.com/2020/12/03/DoLLzF.png",alt:"image-20201202185052141"}})]),t._v(" "),a("h2",{attrs:{id:"feign多组件集成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign多组件集成"}},[t._v("#")]),t._v(" Feign多组件集成")]),t._v(" "),a("ul",[a("li",[t._v("Feign可以集成Ribbon实现负载均衡")]),t._v(" "),a("li",[t._v("Feign可以集成Hystrix实现命令封装")]),t._v(" "),a("li",[t._v("Feign可以集成Hystrix实现业务降级")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s3.ax1x.com/2020/12/03/DoLXM4.png",alt:"Feign"}})]),t._v(" "),a("h2",{attrs:{id:"feign优化点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign优化点"}},[t._v("#")]),t._v(" Feign优化点")]),t._v(" "),a("h3",{attrs:{id:"feign优化点之http性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign优化点之http性能优化"}},[t._v("#")]),t._v(" Feign优化点之HTTP性能优化")]),t._v(" "),a("ul",[a("li",[t._v("Feign默认使用JDK自带的HTTP方式")]),t._v(" "),a("li",[t._v("Feign最大的优化点就是更换HTTP底层实现")]),t._v(" "),a("li",[t._v("目前Apache HttpClient是一个非常好的选择")])]),t._v(" "),a("p",[a("strong",[t._v("更换步骤")])]),t._v(" "),a("ol",[a("li",[t._v("加入依赖"),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io.github.openfeign"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("feign-httpclient"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])]),t._v(" "),a("li",[t._v("开启配置\n"),a("code",[t._v("feign.httpclient.enabled=true")])])]),t._v(" "),a("h3",{attrs:{id:"feign优化点之http解压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign优化点之http解压缩"}},[t._v("#")]),t._v(" Feign优化点之HTTP解压缩")]),t._v(" "),a("ul",[a("li",[t._v("HTTP常见的优化项就是数据压缩")]),t._v(" "),a("li",[t._v("Feign可以支持GZip的请求解压缩")]),t._v(" "),a("li",[t._v("注意：解压缩是把双刃剑，一定要谨慎使用")])]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启请求压缩")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("feign.compression.request.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 压缩对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("feign.compression.request.mime-types")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("text/xml,application/xml,application/json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发压缩的最小阈值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("feign.compression.request.min-request-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2048")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启响应压缩")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("feign.compression.response.enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h2",{attrs:{id:"feign继承"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feign继承"}},[t._v("#")]),t._v(" Feign继承")]),t._v(" "),a("ul",[a("li",[t._v("微服务的目标是大量复用，Feign会导致重复工作量")]),t._v(" "),a("li",[t._v("Feign提供了继承特性帮助我们解决这个问题")]),t._v(" "),a("li",[t._v("接口复用最多只能由一层，切忌多继承")])])])}),[],!1,null,null,null);a.default=e.exports}}]);