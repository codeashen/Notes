# OSI七层网络模型

## OSI七层网络模型由来

国际标准化组织ISO制定的OSI七层协议模型是业界提出来的概念型框架，是不断迭代出来的，下面看看七层协议是如何进化来的。

![](https://img-blog.csdnimg.cn/2021010409370574.gif)

我们首先要解决两台物理机之间的通信需求，具体就是机器A往机器B发送比特流，机器B能收到这些比特流，这便是物理层要做的事情。物理层主要定义了物理设备的标准，有网线的类型，光纤的接口类型，各种传输介质的传输速率等。它的主要作用，是传输比特流即我们所谓的0101二进制数据，让他们转化为电流强弱来进行传输，到达目的地后再转化为的机器码，也就是我们常说的数模转换与模数转换，这层的数据叫做比特。网卡就是工作在这一层里面的。

第二层是数据链路层，在传输比特流的过程中会产生错传、数据传输不完整的可能，因此数据链路层应运而生。数据链路层定义了如何格式化数据进行传输，以及如何控制对物理介质的访问，这一层，通常还提供错误检测和纠正，以确保数据传输的可靠性。本层将比特数据组成了帧，其中，交换机工作在这一层里面，会帧解码，并根据帧中包含的信息把数据发送到正确的接收方。

那随着网络节点的不断增加，点对点通信的时候是需要经过多个节点的，那么如何找到目标节点，如何选择最佳路径便成为了首要需求，此时便有了网络层。这是我们的第三层，将网络地址翻译成对应的物理地址，并决定如何将数据从发送方路由到接受方。综合考虑发送优先权、网络拥塞程度、服务质量以及可选路由的花费，来决定从一个网络中节点A到另一个网络中节点B的最佳路径。由于网络层处理并智能指导数据传送，路由器连接网络各段，所以路由器属于网络层，此层的数据我们称之为数据包，本层我们需要关注的协议主要是TCP/IP协议里的IP协议。

那么随着网络通信需求的进一步扩大，通信过程中需要发送大量的数据，如海量文件传输的可能需要很长时间，而网络在通信的过程中会中断好多次，此时为了保证传输大量文件时的准确性，需要对发出去数据进行切分，切割为一个一个的段落即segment进行发送，那么其中一个段落丢失了该怎么办？要不要重传？每个段落要按照顺序到达吗？这个便是传输层需要考虑的问题了。传输层解决了主机间的数据传输，数据间的传输可以是不同网络的，并且解决了传输质量的问题，称之为OSI模型中最重要的一层。传输协议同时进行流量控制，或是基于接收方可接收数据的快慢程度规定适当的发送速率，除此之外，传输层按照网络能处理的最大尺寸，将较强的数据包进行强制分割，例如以太网无法接收大于1500字节的数据包，发送方节点的传输层，将数据呢分割成较小的数据片，同时对每一数据片安排序列号，以便数据到达接收方节点的传输层时，能以正确的顺序重组，该过程即称为排序传输。传输层中需要关注的协议有TCP/IP协议中的TCP协议和UDP协议。

现在我们已经保证给正确的计算机发送正确的封装过后的信息了，但是用户级别的体验好不好，难道我每次都要去调用TCP去打包，然后就要用IP协议去找路由自己去发？当然不行，所以我们要建立一个自动收发包、自动寻址的功能，于是发明了会话层。会话层的作用，就是建立和管理应用程序之间的通信。

现在我能保证应用程序自动收发包和自动寻址了，但我要用Linux给windows发包，两个系统语法不一致，于是需要表示层帮我们解决不同系统之间的通信语法的问题，在表示层将数据将按照网络能理解的方案进行格式化，这种格式化也因所使用网络的类型不同而不同。

此时，虽然发送方知道自己发送的是什么东西转化成字节数据之后有多长，但接收方肯定不知道，所以应用层的网络协议诞生了，它规定发送方和接收方必须使用一个固定长度的消息头，消息头必须使用某种固定的组成，而且消息投影必须记录消息体的长度等一系列信息，以方便接收方能够正确的解析发送方发送的数据。应用层旨在让你更方便的应用从网络中接收到的数据，至于数据的传递，没有该层你也可以直接在两台电脑间开干，只不过传来传去就是1和0组成的字节数组。该层需要我们重点去关注的是TCP/IP协议中的HTTP协议。

![](https://z3.ax1x.com/2021/07/09/RjejVx.png)

以上就是关于OSI各层次的划分，那从应用层开始都会对要传输的数据头部进行处理，加上本层的一些信息，最终由物理层通过以太网电缆等介质，将数据解析成比特流在网络中传输。数据传递到目标地址，并自底而上的将先前对应层的头部给解析分离出来，这个就是我们的网络数据处理的整个流程。

## TCP/IP四层网络模型

OSI是一个定义良好的协议规范级，并有许多可选部分完成类似的任务，它定义了开放系统的层次，结构层次之间的相互关系以及各层所包括的可能的任务，是作为一个框架来协调和组织各层所提供的服务。但是OSI参考模型并没有提供一个可以实现的方法，而是描述了一些概念，用来协调进程间通信标准的制定。 即OSI参考模型，并不是一个标准，而是一个在制定标准时所使用的概念性框架。事实的标准是TCP/IP四层架构参考模型。

![](https://img-blog.csdn.net/20170822222325781)

TCP/IP参考模型是计算机网络的祖父ARPANET和其后继的因特网使用的参考模型，市面上绝大多数厂商也以该标准为主，该模型并不完全符合OSI的七层参考模型，但我们依然可以理解为它是OSI的一种实现。接下来咱们来讲讲这个主流的协议。

从字面上讲，有人可能会认为，TCP/IP是指TCP和IP这两种协议，实际生活当中有时也确实就是指这两种协议。然而在很多情况下，它只是利用IP进行通信时所必须用到的协议群的统称，具体来说IP、icmp、TCP、udp、telnet或者FTP，都属于TCP/IP协议。TCP/IP与OSI在分层模块上稍有区别，TCP/IP的应用程序可以理解为约等于TCP/IP中的应用层、表示层和会话层的组合，同时OSI的数据链路层以及物理层在TCP/IP中被规定为链路层。OSI模型注重通信协议必要的功能是什么，而TCP/IP则更强调在计算机上实现协议应该开发哪种程序。

![](https://img-blog.csdn.net/20160802112022872)

从另外一张图里，在数据传输的过程中，我们可以看到和OSI一样，TCP/IP的每个过程中，都会对所发送的数据附加一个头部，在这个头部中包含了该层必要的信息，如发送的目标地址以及协议相关信息。通常为协议提供的信息为报头的头部，所要发送的内容为数据。从下一层角度上看，数据被传送到接收端之后，再层层解套出来。

# 附录

- [OSI七层模型详解](https://blog.csdn.net/yaopeng_2005/article/details/7064869)
- [TCP/IP四层模型](https://blog.csdn.net/csdn_kou/article/details/82910753)
- [OSI七层协议模型、TCP/IP四层模型和五层协议体系结构之间的关系](https://blog.csdn.net/wxb880114/article/details/82751680)
- [OSI七层模型与TCP/IP五层模型](https://www.cnblogs.com/qishui/p/5428938.html)

