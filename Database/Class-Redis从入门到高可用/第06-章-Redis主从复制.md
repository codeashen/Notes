# 一、 什么是主从复制

Redis单机问题

- 机器故障：单机如果机器故障，那么久无法及时提供服务
- 容量瓶颈：同时单机的内存等容量有限，无法支持耗能较大的应用
- QPS瓶颈：如果应用的访问并发过大，单机环境无法支持那么大的QPS

主从复制模式

- 一个master可以有多个slave
- 一个slave只能有一个master
- 数据流向是单向的，master到slave

主从复制的作用

- 数据副本，为数据提供了多个副本，高可用分布式的基础
- 扩展读性能，可以做读写分离

# 二、主从复制配置

主从复制有两种实现方式：

1. `slaveof`命令
2. 配置文件

## 2.1 命令方式

在从节点上执行 `slaveof 127.0.0.1 6379` 命令，节点就会声明为主节点的从节点，并且异步进行数据复制。

![image-20210604180047726](https://z3.ax1x.com/2021/06/04/2JXWa6.png)

执行 `slaveof no one` 生命本节点不属于任何节点的从节点，和原主节点的连接就会断开，原主节点的数据不会再复制过来。

![image-20210604180307367](https://z3.ax1x.com/2021/06/04/2JjZJU.png)

> 优点：无需重启；缺点：不便于管理

## 2.2 配置方式

```
slaveof ip port         #配置为指定节点的从节点
slave-read-only yes     #配置从节点只读
```

> 优点：便于统一管理；缺点：需要重启















