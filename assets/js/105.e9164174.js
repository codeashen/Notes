(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{430:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"一、网络知识回顾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、网络知识回顾"}},[s._v("#")]),s._v(" 一、网络知识回顾")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/19/sghEPP.png",alt:"image-20210118180845255"}})]),s._v(" "),a("p",[s._v("共有IP和私有IP：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Public IP：互联网上的唯一标识，可以访问internet")])]),s._v(" "),a("li",[a("p",[s._v("Private IP：不可在互联网上使用，仅供机构内部使用")])]),s._v(" "),a("li",[a("p",[s._v("A类：10.0.0.0-10.255.255.255(10.0.0.0/8）")])]),s._v(" "),a("li",[a("p",[s._v("B类：172.16.0.0--172.31.255.255(172.16.0.0/12)")])]),s._v(" "),a("li",[a("p",[s._v("C类：192.168.0.0--192.168.255.255(192.168.0.0/16)")])])]),s._v(" "),a("p",[s._v("网络地址转换（NAT）：既然私有地上不能在互联网上使用，就需要 NAT 技术。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/19/sghQVs.png",alt:"image-20210118182112952"}})]),s._v(" "),a("h1",{attrs:{id:"二、docker-容器通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、docker-容器通信"}},[s._v("#")]),s._v(" 二、Docker 容器通信")]),s._v(" "),a("h2",{attrs:{id:"_2-1-容器通信原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-容器通信原理"}},[s._v("#")]),s._v(" 2.1 容器通信原理")]),s._v(" "),a("p",[s._v("Docker 容器互通")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nNETWORK ID          NAME                DRIVER              SCOPE\n6c7fa109641b        bridge              bridge              "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nb489f385f6a5        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nd4eb15a0b172        none                null                "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("docker 容器如何互相通信以及 docker 容器如何访问外网，如下图所示：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/19/sghlan.png",alt:"image-20210118192320605"}})]),s._v(" "),a("ul",[a("li",[s._v("容器间通信：docker 容器都连接到 docker0 bridge 上，通过 docker0 bridge 实现容器间的互相通信")]),s._v(" "),a("li",[s._v("容器与互联网通信：docker0 bridge 与物理机网卡间做网络地址转换，使用物理机的 ip 访问外网")])]),s._v(" "),a("h2",{attrs:{id:"_2-2-容器之间的-link"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-容器之间的-link"}},[s._v("#")]),s._v(" 2.2 容器之间的 link")]),s._v(" "),a("p",[s._v("使用容器名连通容器操作（实际用的不多）:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行 mytomcat 链接到容器 mymysql")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mytomcat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--link")]),s._v(" mymysql\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 mytomcat 容器")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" mytomcat /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用容器名称 ping，发现可以 ping 通")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" mymysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"_2-3-容器的端口映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-容器的端口映射"}},[s._v("#")]),s._v(" 2.3 容器的端口映射")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 nginx，使用 -p 参数将容器内 80 端口映射到本地 10080 端口")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10080")]),s._v(":80 nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("这样就可以在外部环境，通过访问 docker 宿主机映射的端口来访问容器内的应用。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/19/sgh8P0.png",alt:"image-20210118195933222"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);