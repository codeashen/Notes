(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{398:function(t,_,e){"use strict";e.r(_);var v=e(4),a=Object(v.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"一、elasticsearch-入门"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一、elasticsearch-入门"}},[t._v("#")]),t._v(" 一、Elasticsearch 入门")]),t._v(" "),_("h2",{attrs:{id:"_1-1-elasticsearch-配置说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-elasticsearch-配置说明"}},[t._v("#")]),t._v(" 1.1 Elasticsearch 配置说明")]),t._v(" "),_("ul",[_("li",[t._v("elasticsearch.yml 关键配置\n"),_("ul",[_("li",[t._v("cluster.name 集群名称，以此判断是否属于同一集群")]),t._v(" "),_("li",[t._v("node.name 节点名称，区分同一集群的不同节点")]),t._v(" "),_("li",[t._v("network.host/http.port 网络地址和端口，用于http和transport服务使用")]),t._v(" "),_("li",[t._v("path.data 数据存储地址")]),t._v(" "),_("li",[t._v("path.log 日志存储地址")])])]),t._v(" "),_("li",[t._v("Development与Production模式说明\n"),_("ul",[_("li",[t._v("Development模式下启动会以warning的方式提示配置检查异常")]),t._v(" "),_("li",[t._v("Production模式下在启动时会以error的方式提示配置检查异常并退出")]),t._v(" "),_("li",[t._v("以transport的地址是否绑定localhost为判断标准 network.host")])])]),t._v(" "),_("li",[t._v("参数修改的第二种方式\n"),_("ul",[_("li",[t._v("bin/elasticsearch -Ehttp.port=19200")])])])]),t._v(" "),_("h2",{attrs:{id:"_1-2-elasticsearch-本地集群启动"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-elasticsearch-本地集群启动"}},[t._v("#")]),t._v(" 1.2 Elasticsearch 本地集群启动")]),t._v(" "),_("div",{staticClass:"language-shell line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 依次执行以下三条命令")]),t._v("\nbin/elasticsearch\nbin/elasticsearch "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Ehttp.port")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("8200")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Epath.data")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node2\nbin/elasticsearch "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Ehttp.port")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("7200")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Epath.data")]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node3\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br")])]),_("ul",[_("li",[t._v("节点信息："),_("code",[t._v("http://localhost:9200/_cat/nodes?v")])]),t._v(" "),_("li",[t._v("集群信息："),_("code",[t._v("http://localhost:9200/_cluster/stats")])])]),t._v(" "),_("h2",{attrs:{id:"_1-3-常用术语"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-常用术语"}},[t._v("#")]),t._v(" 1.3 常用术语")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("Document")]),t._v("：文档，用户存储在es中的数据文档")]),t._v(" "),_("li",[_("strong",[t._v("Index")]),t._v("：索引，由具有相同字段的文档列表组成")]),t._v(" "),_("li",[_("strong",[t._v("Node")]),t._v("：节点，一个Elasticsearch的运行实例，是集群的构成单元")]),t._v(" "),_("li",[_("strong",[t._v("Cluster")]),t._v("：集群，由一个或多个节点组成，对外提供服务")])]),t._v(" "),_("p",[t._v("每一个文档都有一个唯一标识id，可以指定，也可以自动生成")]),t._v(" "),_("p",[_("strong",[t._v("元数据")]),t._v("，用于标注文档的相关信息，含义如下：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("_index")]),t._v("：文档所在的索引名")]),t._v(" "),_("li",[_("code",[t._v("_type")]),t._v("：文档所在的类型名")]),t._v(" "),_("li",[_("code",[t._v("_id")]),t._v("：文档唯一 id")]),t._v(" "),_("li",[_("code",[t._v("_uid")]),t._v("：组合id，由"),_("code",[t._v("_type")]),t._v("和"),_("code",[t._v("_id")]),t._v("组成（6.x版本"),_("code",[t._v("_type")]),t._v("不再起作用，同"),_("code",[t._v("_id")]),t._v("一样)")]),t._v(" "),_("li",[_("code",[t._v("_source")]),t._v("：文档的原始Json数据，可以从这里获取每个字段的内容")]),t._v(" "),_("li",[_("code",[t._v("_all")]),t._v("：整合所有字段内容到该字段，默认禁用")])]),t._v(" "),_("p",[t._v("索引（Index）中存储具有相同结构的文档（Document）每个索引都有自己的mapping定义，用于定义字段名和类型，一个集群可以有多个索引")]),t._v(" "),_("h2",{attrs:{id:"_1-4-rest-api"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-rest-api"}},[t._v("#")]),t._v(" 1.4 Rest Api")]),t._v(" "),_("p",[_("strong",[t._v("索引api")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("动作")]),t._v(" "),_("th",[t._v("请求")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("创建索引")]),t._v(" "),_("td",[t._v("PUT "),_("code",[t._v("/test_index")])])]),t._v(" "),_("tr",[_("td",[t._v("查看现有索引")]),t._v(" "),_("td",[t._v("GET "),_("code",[t._v("_cat/indices")])])]),t._v(" "),_("tr",[_("td",[t._v("删除索引")]),t._v(" "),_("td",[t._v("DELETE "),_("code",[t._v("/test_index")])])])])]),t._v(" "),_("p",[_("strong",[t._v("文档api")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("动作")]),t._v(" "),_("th",[t._v("请求")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("创建文档指定id")]),t._v(" "),_("td",[t._v("PUT "),_("code",[t._v("/test_index/_doc/1")])]),t._v(" "),_("td",[t._v("如果索引不存在，会自动创建")])]),t._v(" "),_("tr",[_("td",[t._v("创建文档不指定id")]),t._v(" "),_("td",[t._v("POST "),_("code",[t._v("/test_index/_doc")])]),t._v(" "),_("td",[t._v("注意请求方式和指定id的不同")])]),t._v(" "),_("tr",[_("td",[t._v("查询文档")]),t._v(" "),_("td",[t._v("GET "),_("code",[t._v("/test_index/_doc/1")])]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("搜索文档")]),t._v(" "),_("td",[t._v("GET "),_("code",[t._v("/test_index/_doc/_search")])]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("strong",[t._v("批量操作api")])]),t._v(" "),_("ol",[_("li",[_("p",[t._v("批量更新：es允许一次创建多个文档，从而减少网络传输开销，提升写入速率-endpoint为_bulk，如下：")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://s3.ax1x.com/2020/12/23/rs6DVP.png",alt:"image-20201222233731476"}})]),t._v(" "),_("p",[t._v("操作类型：")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("index")]),t._v("：覆盖更新，无论文档是否存在")]),t._v(" "),_("li",[_("strong",[t._v("update")]),t._v("：更新")]),t._v(" "),_("li",[_("strong",[t._v("create")]),t._v("：创建，如果已存在报错")]),t._v(" "),_("li",[_("strong",[t._v("delete")]),t._v("：删除")])])]),t._v(" "),_("li",[_("p",[t._v("批量查询")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://s3.ax1x.com/2020/12/23/rs6rUf.png",alt:"image-20201222234717807"}})])])])])}),[],!1,null,null,null);_.default=a.exports}}]);